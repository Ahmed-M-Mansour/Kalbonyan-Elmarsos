var A=Object.create;var n=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var p=t=>n(t,"__esModule",{value:!0});var C=(t,e)=>{p(t);for(var r in e)n(t,r,{get:e[r],enumerable:!0})},P=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of w(e))!S.call(t,o)&&o!=="default"&&n(t,o,{get:()=>e[o],enumerable:!(r=x(e,o))||r.enumerable});return t},u=t=>P(p(n(t!=null?A(E(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);C(exports,{main:()=>q});var c=u(require("util")),g=u(require("aws-sdk")),i;g.default.config.logger={log:l};function l(){i.push({date:new Date,string:c.default.format.apply(null,arguments)})}function f(t){i=[],l("API event",{body:t.body,pathParameters:t.pathParameters,queryStringParameters:t.queryStringParameters})}function y(t){i.forEach(({date:e,string:r})=>console.debug(e,r)),console.error(t)}function d(t){return async function(e,r){let o,s;f(e);try{o=await t(e,r),s=200}catch(m){y(m),o={error:m.message},s=500}return{statusCode:s,body:JSON.stringify(o),headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0}}}}var h=u(require("aws-sdk")),a=new h.default.DynamoDB.DocumentClient,b={get:t=>a.get(t).promise(),put:t=>a.put(t).promise(),query:t=>a.query(t).promise(),update:t=>a.update(t).promise(),delete:t=>a.delete(t).promise()};var q=d(async t=>{let e=JSON.parse(t.body),r={TableName:process.env.TABLE_NAME,Key:{userId:t.requestContext.authorizer.iam.cognitoIdentity.identityId,noteId:t.pathParameters.id},UpdateExpression:"SET content = :content, attachment = :attachment",ExpressionAttributeValues:{":attachment":e.attachment||null,":content":e.content||null},ReturnValues:"ALL_NEW"};return await b.update(r),{status:!0}});0&&(module.exports={main});
//# sourceMappingURL=update.js.map
